# programing_test

設問１の回答が[ans1.py](ans1.py)<br>
設問２の回答が[ans2.py](ans2.py)<br>
設問３の回答が[ans3.py](ans3.py)<br>
という構成になっています。
すべての設問でテストデータは共通して、[response.log](response.log)を使用しています。
## コード内容
### [設問１](ans1.py)
- logファイルを読み込み、リストに１行ごとに格納し、その後1行ごとfor分の中でコンマで区切ったものをlog_spritに格納しpingがタイムアウトしたかどうかを判定している。(8~12行目)
- タイムアウトしている場合、確認日時をstr型からdatetime型に変換し、辞書型配列stopにをサーバアドレスをkey、確認日時をvalueとして格納する。(11~22行目)
    - すでにstopにサーバアドレスが存在する場合は、continueする。
- 確認日時をstr型からdatetime型に変換し、stopに格納した確認日時が読み込んでいる行より大きい場合、又は、stopに格納した確認日時が読み込んでいる行と一致する場合はcontinueする。
- それ以外の場合は、読み込んでいる確認日時からstopに格納している確認日時を引いた値とサーバアドレスを表示する。
    - 期間は、hh:mm:ssの形式。ただし、時=hh(2桁の数字、以降同様)、分=mm、秒=ssである

#### テスト結果
~~~
0:00:11の間10.20.30.1/16は故障していました。
0:00:05の間10.20.30.2/16は故障していました。
0:00:31の間10.20.30.1/16は故障していました。
0:01:00の間10.20.30.1/16は故障していました。
0:01:00の間10.20.30.2/16は故障していました。
0:01:05の間10.20.30.2/16は故障していました。
~~~

### [設問２](ans2.py)
- 連続タイムアウト回数をNとして入力する。(9行目)
- logファイルを読み込み、リストに１行ごとに格納し、その後1行ごとfor分の中でコンマで区切ったものをlog_spritに格納しpingがタイムアウトしたかどうかを判定している。(11~15行目)
- タイムアウトしている場合、確認日時をstr型からdatetime型に変換し、辞書型配列stopにサーバアドレスをkey、確認日時をvalueとして格納、また辞書型配列stop_countにサーバアドレスをkey、1をvalueとして格納する。(16~29行目)
    - すでにstopにサーバアドレスが存在する場合は、stop_countのvalueをインクリメントする。
- 
- 確認日時をstr型からdatetime型に変換し、stopに格納した確認日時が読み込んでいる行より大きい場合、又は、stopに格納した確認日時が読み込んでいる行と一致する場合はcontinueする。
- stop_countのvalueがN以上かつ、読み込んでいるものがpingタイムアウトしていなければ、読み込んでいる確認日時からstopに格納している確認日時を引いた値とサーバアドレスを表示する。
    - 期間は、hh:mm:ssの形式。ただし、時=hh、分=mm、秒=ssである

#### テスト結果
~~~
N
の形式で入力する。
Nは連続タイムアウト回数である
input: 
2
output: 
2020-10-19 13:33:24から0:01:00の間10.20.30.1/16は故障していました。
2020-10-19 13:33:30から0:01:00の間10.20.30.2/16は故障していました。

input:
3
output:
2020-10-19 13:33:24から0:01:00の間10.20.30.1/16は故障していました。
~~~

### [設問３](ans3.py)
- 連続タイムアウト回数をNとして入力する。(11行目)
- m, tを入力する(12行目)
- logファイルを読み込み、リストに１行ごとに格納し、その後1行ごとfor分の中でコンマで区切ったものをlog_spritに格納しpingがタイムアウトしたかどうかを判定している。(14~22行目)
- タイムアウトしている場合、確認日時をstr型からdatetime型に変換し、辞書型配列stopにサーバアドレスをkey、確認日時をvalueとして格納、また辞書型配列stop_countにサーバアドレスをkey、1をvalueとして格納する。(23~39行目)
    - すでにstopにサーバアドレスが存在する場合は、stop_countのvalueをインクリメントする。
- 
- 確認日時をstr型からdatetime型に変換し、stopに格納した確認日時が読み込んでいる行より大きい場合、又は、stopに格納した確認日時が読み込んでいる行と一致する場合はcontinueする。(41~50行目)
- stop_countのvalueがN以上かつ、読み込んでいるものがpingタイムアウトしていなければ、読み込んでいる確認日時からstopに格納している確認日時を引いた値とサーバアドレスを表示する。
    - 期間は、hh:mm:ssの形式。ただし、時=hh、分=mm、秒=ssである
- m回の平均応答時間がtミリ秒を超えた場合、表示する。(52~55行目)
#### テスト結果
~~~
N
m t
の形式で入力する。
Nは連続タイムアウト回数、mは直近回数、tは平均応答時間である。

input: 
3
2 50
output: 
2020-10-19 13:34:24から0:01:00の間10.20.30.1/16は故障していました。
2020-10-19 13:32:24から10.20.30.1/16においての直近2回の平均応答時間が 264.50ミリ秒を超えました。
2020-10-19 13:34:30から10.20.30.2/16においての直近2回の平均応答時間が 102.00ミリ秒を超えました。
~~~
